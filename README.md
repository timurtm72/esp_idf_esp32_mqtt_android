# –ú–æ–π —Å–∞–π—Ç –∏ —Ä–µ–∑—é–º–µ:

- [–ú–æ–π —Å–∞–π—Ç:](https://technocom.site123.me/)
- [–ú–æ–µ —Ä–µ–∑—é–º–µ –∏–Ω–∂–µ–Ω–µ—Ä –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç microcontrollers, PLC:](https://innopolis.hh.ru/resume/782d86d5ff0e9487200039ed1f6f3373384b30)
- [–ú–æ–µ —Ä–µ–∑—é–º–µ –∏–Ω–∂–µ–Ω–µ—Ä –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç Java backend developer (Spring):](https://innopolis.hh.ru/resume/9e3b451aff03fd23830039ed1f496e79587649)
- [Linkedin](https://www.linkedin.com/public-profile/settings?trk=d_flagship3_profile_self_view_public_profile)
  
# ESP32 IoT Project —Å –≤–µ–±-–Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π Wi-Fi

IoT –ø—Ä–æ–µ–∫—Ç –Ω–∞ ESP32 —Å –¥–∞—Ç—á–∏–∫–æ–º DHT, RGB —Å–≤–µ—Ç–æ–¥–∏–æ–¥–æ–º, MQTT –∫–ª–∏–µ–Ω—Ç–æ–º –∏ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Wi-Fi —á–µ—Ä–µ–∑ Access Point —Ä–µ–∂–∏–º.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üì° **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ Wi-Fi —Ä–µ–∂–∏–º–æ–≤**: STA ‚Üî AP
- üåê **–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Wi-Fi** —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞
- üíæ **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫** –≤ —ç–Ω–µ—Ä–≥–æ–Ω–µ–∑–∞–≤–∏—Å–∏–º–æ–π –ø–∞–º—è—Ç–∏ (NVS)
- üå°Ô∏è **–î–∞—Ç—á–∏–∫ DHT** (—Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –∏ –≤–ª–∞–∂–Ω–æ—Å—Ç—å)
- üí° **RGB —Å–≤–µ—Ç–æ–¥–∏–æ–¥** —Å –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º —Ü–≤–µ—Ç–∞ –ø–æ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–µ
- üìä **MQTT –∫–ª–∏–µ–Ω—Ç** –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö
- üîÑ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ** –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

## –ê–ø–ø–∞—Ä–∞—Ç–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **ESP32** (–ª—é–±–∞—è –ø–ª–∞—Ç–∞)
- **DHT22/AM2301** –¥–∞—Ç—á–∏–∫ (–ø–æ–¥–∫–ª—é—á–µ–Ω –∫ GPIO 17)
- **RGB —Å–≤–µ—Ç–æ–¥–∏–æ–¥ WS2812** (–ø–æ–¥–∫–ª—é—á–µ–Ω –∫ GPIO 48)
- **–ü–∏—Ç–∞–Ω–∏–µ** 5V —á–µ—Ä–µ–∑ USB –∏–ª–∏ –≤–Ω–µ—à–Ω–∏–π –±–ª–æ–∫ –ø–∏—Ç–∞–Ω–∏—è

## –°—Ö–µ–º–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

```
ESP32 GPIO 17  ‚Üí DHT22 Data
ESP32 GPIO 48  ‚Üí WS2812 DIN
ESP32 3.3V     ‚Üí DHT22 VCC
ESP32 5V       ‚Üí WS2812 VCC
ESP32 GND      ‚Üí DHT22 GND, WS2812 GND
```

## –°–±–æ—Ä–∫–∞ –∏ –ø—Ä–æ—à–∏–≤–∫–∞

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ ESP-IDF

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏ ESP-IDF v5.1 –∏–ª–∏ –Ω–æ–≤–µ–µ
git clone --recursive https://github.com/espressif/esp-idf.git
cd esp-idf
./install.sh esp32
. ./export.sh
```

### 2. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

```bash
git clone <your-repo-url>
cd esp32-iot-project
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

```bash
# –ù–∞—Å—Ç—Ä–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –ø—Ä–æ–µ–∫—Ç–∞
idf.py menuconfig
```

–í–∞–∂–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ menuconfig:
- `Component config ‚Üí Wi-Fi ‚Üí WiFi Task Core ID` = `0`
- `Component config ‚Üí FreeRTOS ‚Üí Run FreeRTOS only on first core` = `Enable`

### 4. –°–±–æ—Ä–∫–∞ –∏ –ø—Ä–æ—à–∏–≤–∫–∞

```bash
# –°–æ–±–µ—Ä–∏ –ø—Ä–æ–µ–∫—Ç
idf.py build

# –ü—Ä–æ—à–µ–π ESP32 (–∑–∞–º–µ–Ω–∏ COM-–ø–æ—Ä—Ç –Ω–∞ —Å–≤–æ–π)
idf.py -p COM3 flash monitor
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫

1. **ESP32 –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –≤ AP —Ä–µ–∂–∏–º–µ** (—Ç–∞–∫ –∫–∞–∫ –Ω–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö Wi-Fi –¥–∞–Ω–Ω—ã—Ö)
2. **–ù–∞–π–¥–∏ —Å–µ—Ç—å Wi-Fi**: `ESP32-Config` (–ø–∞—Ä–æ–ª—å: `12345678`)
3. **–ü–æ–¥–∫–ª—é—á–∏—Å—å –∫ –Ω–µ–π** —Å —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –∏–ª–∏ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞
4. **–û—Ç–∫—Ä–æ–π –±—Ä–∞—É–∑–µ—Ä** –∏ –ø–µ—Ä–µ–π–¥–∏ –ø–æ –∞–¥—Ä–µ—Å—É: `http://192.168.4.1`

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Wi-Fi

1. **–£–≤–∏–¥–∏—à—å –≤–µ–±-—Ñ–æ—Ä–º—É** —Å –ø–æ–ª—è–º–∏:
   - –ò–º—è —Å–µ—Ç–∏ (SSID)
   - –ü–∞—Ä–æ–ª—å
2. **–í–≤–µ–¥–∏ –¥–∞–Ω–Ω—ã–µ** —Å–≤–æ–µ–≥–æ —Ä–æ—É—Ç–µ—Ä–∞
3. **–ù–∞–∂–º–∏ "–ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è"**
4. **ESP32 –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—Å—è** —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã
5. **–ü–æ–¥–∫–ª—é—á–∏—Ç—Å—è –∫ —Ç–≤–æ–µ–π —Å–µ—Ç–∏** –∏ –Ω–∞—á–Ω–µ—Ç —Ä–∞–±–æ—Ç—É

### –û–±—ã—á–Ω–∞—è —Ä–∞–±–æ—Ç–∞

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Wi-Fi:
- üå°Ô∏è **–ß–∏—Ç–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ** —Å DHT –∫–∞–∂–¥—ã–µ 3 —Å–µ–∫—É–Ω–¥—ã
- üí° **–ú–µ–Ω—è–µ—Ç —Ü–≤–µ—Ç RGB** –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã:
  - üîµ –°–∏–Ω–∏–π: < 20¬∞C
  - üü¢ –ó–µ–ª–µ–Ω—ã–π: 20-25¬∞C  
  - üü° –ñ–µ–ª—Ç—ã–π: 25-30¬∞C
  - üî¥ –ö—Ä–∞—Å–Ω—ã–π: > 30¬∞C
- üìä **–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ** –≤ MQTT –±—Ä–æ–∫–µ—Ä
- üì± **–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç—É—Å** —á–µ—Ä–µ–∑ —Å–µ—Ä–∏–π–Ω—ã–π –ø–æ—Ä—Ç

### –°–±—Ä–æ—Å –Ω–∞—Å—Ç—Ä–æ–µ–∫

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ —Å–º–µ–Ω–∏—Ç—å Wi-Fi —Å–µ—Ç—å:
1. **–û—Ç–∫–ª—é—á–∏ ESP32** –æ—Ç –ø–∏—Ç–∞–Ω–∏—è –Ω–∞ 5+ —Å–µ–∫—É–Ω–¥
2. **–õ–∏–±–æ –∏—Å–ø–æ–ª—å–∑—É–π —Ñ—É–Ω–∫—Ü–∏—é** `clear_wifi_credentials()` –≤ –∫–æ–¥–µ
3. **ESP32 —Å–Ω–æ–≤–∞ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è** –≤ AP —Ä–µ–∂–∏–º–µ

## –ù–∞—Å—Ç—Ä–æ–π–∫–∏

### Wi-Fi Access Point (–≤ `main/wifi_ap.h`)

```c
#define WIFI_AP_SSID "ESP32-Config"      // –ò–º—è AP —Å–µ—Ç–∏
#define WIFI_AP_PASSWORD "12345678"      // –ü–∞—Ä–æ–ª—å AP (–ø—É—Å—Ç–æ–π = –æ—Ç–∫—Ä—ã—Ç–∞—è —Å–µ—Ç—å)
#define WIFI_AP_CHANNEL 1                // –ö–∞–Ω–∞–ª Wi-Fi
#define WIFI_AP_MAX_CONNECTIONS 4        // –ú–∞–∫—Å. –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π
```

### MQTT –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (–≤ `main/main.h`)

```c
#define MQTT_BROKER_URL "mqtt://193.43.147.210"
#define MQTT_PORT 1883
#define MQTT_USERNAME ""
#define MQTT_PASSWORD ""
```

### DHT –¥–∞—Ç—á–∏–∫ (–≤ `main/main.h`)

```c
#define DHT_GPIO 17                      // GPIO –ø–∏–Ω –¥–∞—Ç—á–∏–∫–∞
#define DHT_TYPE DHT_TYPE_AM2301         // –¢–∏–ø –¥–∞—Ç—á–∏–∫–∞
#define DHT_READ_INTERVAL 3000           // –ò–Ω—Ç–µ—Ä–≤–∞–ª —á—Ç–µ–Ω–∏—è (–º—Å)
```

### RGB —Å–≤–µ—Ç–æ–¥–∏–æ–¥ (–≤ `main/main.h`)

```c
#define RMT_LED_STRIP_GPIO_NUM 48        // GPIO –ø–∏–Ω —Å–≤–µ—Ç–æ–¥–∏–æ–¥–∞
#define EXAMPLE_LED_NUMBERS 1            // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–≤–µ—Ç–æ–¥–∏–æ–¥–æ–≤
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
esp32-iot-project/
‚îú‚îÄ‚îÄ main/
‚îÇ   ‚îú‚îÄ‚îÄ main.c           # –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª
‚îÇ   ‚îú‚îÄ‚îÄ main.h           # –ó–∞–≥–æ–ª–æ–≤–∫–∏ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ wifi.c           # Wi-Fi STA —Ä–µ–∂–∏–º
‚îÇ   ‚îú‚îÄ‚îÄ wifi_ap.c        # Wi-Fi AP —Ä–µ–∂–∏–º + –≤–µ–±-—Å–µ—Ä–≤–µ—Ä
‚îÇ   ‚îú‚îÄ‚îÄ wifi_ap.h        # –ó–∞–≥–æ–ª–æ–≤–∫–∏ AP —Ä–µ–∂–∏–º–∞
‚îÇ   ‚îú‚îÄ‚îÄ dht.c            # –†–∞–±–æ—Ç–∞ —Å DHT –¥–∞—Ç—á–∏–∫–æ–º
‚îÇ   ‚îú‚îÄ‚îÄ led.c            # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ RGB —Å–≤–µ—Ç–æ–¥–∏–æ–¥–æ–º
‚îÇ   ‚îú‚îÄ‚îÄ mqtt.c           # MQTT –∫–ª–∏–µ–Ω—Ç
‚îÇ   ‚îú‚îÄ‚îÄ process.c        # –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îî‚îÄ‚îÄ CMakeLists.txt   # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–±–æ—Ä–∫–∏
‚îú‚îÄ‚îÄ components/          # –í–Ω–µ—à–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îú‚îÄ‚îÄ CMakeLists.txt       # –ö–æ—Ä–Ω–µ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–±–æ—Ä–∫–∏
‚îú‚îÄ‚îÄ sdkconfig           # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è ESP-IDF
‚îî‚îÄ‚îÄ README.md           # –≠—Ç–æ—Ç —Ñ–∞–π–ª
```

## API —Ñ—É–Ω–∫—Ü–∏–∏

### Wi-Fi —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

```c
void wifi_init(void);                                    // –ê–≤—Ç–æ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Wi-Fi
void wifi_init_sta_mode(const char *ssid, const char *password); // STA —Ä–µ–∂–∏–º
esp_err_t wifi_init_ap(void);                           // AP —Ä–µ–∂–∏–º

bool has_saved_wifi_credentials(void);                  // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
esp_err_t save_wifi_credentials(const char *ssid, const char *password); // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
esp_err_t load_wifi_credentials(char *ssid, char *password);              // –ó–∞–≥—Ä—É–∑–∫–∞
esp_err_t clear_wifi_credentials(void);                 // –û—á–∏—Å—Ç–∫–∞
```

### –í–µ–±-—Å–µ—Ä–≤–µ—Ä

```c
esp_err_t start_webserver(void);                        // –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
void stop_webserver(void);                              // –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞
```

## –û—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤

```bash
idf.py monitor
```

### –¢–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏

1. **ESP32 –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ Wi-Fi**
   - –ü—Ä–æ–≤–µ—Ä—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å SSID –∏ –ø–∞—Ä–æ–ª—è
   - –£–±–µ–¥–∏—Å—å —á—Ç–æ —Ä–æ—É—Ç–µ—Ä –≤ –∑–æ–Ω–µ –¥–µ–π—Å—Ç–≤–∏—è
   - –ü—Ä–æ–≤–µ—Ä—å —Ç–∏–ø —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è (–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è WPA/WPA2)

2. **–ù–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –≤–µ–±-—Å—Ç—Ä–∞–Ω–∏—Ü–∞**
   - –£–±–µ–¥–∏—Å—å —á—Ç–æ –ø–æ–¥–∫–ª—é—á–µ–Ω –∫ —Å–µ—Ç–∏ `ESP32-Config`
   - –ü–æ–ø—Ä–æ–±—É–π –∞–¥—Ä–µ—Å `192.168.4.1` –Ω–∞–ø—Ä—è–º—É—é
   - –û—Ç–∫–ª—é—á–∏ –º–æ–±–∏–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ

3. **DHT –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**
   - –ü—Ä–æ–≤–µ—Ä—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ GPIO 17
   - –£–±–µ–¥–∏—Å—å –≤ –ø–∏—Ç–∞–Ω–∏–∏ 3.3V –¥–ª—è –¥–∞—Ç—á–∏–∫–∞
   - –ü–æ–ø—Ä–æ–±—É–π –¥—Ä—É–≥–æ–π –¥–∞—Ç—á–∏–∫

4. **RGB –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç**
   - –ü—Ä–æ–≤–µ—Ä—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ GPIO 48
   - –£–±–µ–¥–∏—Å—å –≤ –ø–∏—Ç–∞–Ω–∏–∏ 5V –¥–ª—è WS2812
   - –ü—Ä–æ–≤–µ—Ä—å —Ç–∏–ø —Å–≤–µ—Ç–æ–¥–∏–æ–¥–∞ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –≤–æ–ø—Ä–æ—Å—ã:
1. –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏ —á–µ—Ä–µ–∑ `idf.py monitor`
2. –£–±–µ–¥–∏—Å—å –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –¥–∞—Ç—á–∏–∫–æ–≤
3. –ü—Ä–æ–≤–µ—Ä—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ `main.h`

---
–°–æ–∑–¥–∞–Ω–æ –¥–ª—è ESP-IDF v5.1+
